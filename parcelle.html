
<div style=" padding-top: 60px;">
    <table style="padding: 1px; margin-bottom: 2px" class="table">
        <tr style=" padding: 2px; margin: 2px">
            <td style="padding: 2px; margin: 2px">
                <button id="btn-showformInfos" class="button-blue button-3d" onclick="$('#btn-showformInfos').hide();
                        $('#btn-hideformInfos').show();
                        $('#formInfos').show('slow');"><i class="fa fa-edit"></i> Editer Infos</button>
                <button style="display: none" id="btn-hideformInfos" class="button-red button-3d" onclick="$('#formInfos').hide();
                        $('#btn-hideformInfos').hide();
                        $('#btn-showformInfos').show();"><i class="fa fa-eye-slash"></i> cacher Infos</button>
            </td>
            <td colspan="1" style=" padding: 2px; margin: 2px">
                <button id="btn-savePolygone" class="button-green button-3d" onclick="savePolygone();"><i class="fa fa-save"></i>  Enregistrer</button>
            </td>
        </tr>
    </table>
</div>
<div id="formInfos" style="display: none">
    <table style="padding: 5px; margin-bottom: 2px" class="table">
        <tr style=" padding: 2px; margin: 2px">
            <td style=" padding: 2px; margin: 2px">
                <select class="contactField" onclick="polygoneDepart.fillColor = $('#categorie').val();" id="categorie" name="categorie">
                    <option value="">   Catégorie</option>
                    <option value="#3367D6">   Riz</option>
                    <option value="#000000">   Mais</option>
                    <option value="#DC493C">   Blé</option>
                    <option value="#F7E707">   Tomate</option>
                </select>
            </td>
        </tr>

        <tr style=" padding: 2px; margin: 2px">
            <td style=" padding: 2px; margin: 2px">
                <input class="contactField" name="libelle"  id="libelle" placeholder="Libelle de la zone"  />
            </td>
        </tr>

        <tr style=" padding: 2px; margin: 2px">
            <td style=" padding: 2px; margin: 2px">
                <textarea class="contactField" style="height: 150px" name="description"  id="description" placeholder="Description de la zone"></textarea>
            </td>
        </tr>
    </table>

</div>
<div id="map" style="width: 100%; height: 500px; padding-top: 2px; text-align: center">
    <img style="text-align: center" src="images/loading.gif" alt="Chargement en cours..."/>
</div> 

<script type="text/javascript">
                    var map;
                    var polygoneDepart;
                    var latInitial = '14.7362987';
                    var lngInitial = '-17.45662444';
                    var initialLocation1;
                    var initialLocation2;
                    var initialLocation3;
                    var initialLocation4;
                    var initialLocation5;
                    var distance = 0.1;


                    latInitial = position.coords.latitude;
                    lngInitial = position.coords.longitude;

                    //alert('position detectée\n' + latInitial + '<==/==>' + lngInitial);
                    initialLocation = {lat: latInitial, lng: lngInitial};
                    initialLocation1 = translateCoordinates(100, latInitial, lngInitial, 45);
                    initialLocation2 = translateCoordinates(100, latInitial, lngInitial, 90);
                    initialLocation3 = translateCoordinates(100, latInitial, lngInitial, 135);
                    initialLocation4 = translateCoordinates(100, latInitial, lngInitial, 180);
                    initialLocation5 = translateCoordinates(100, latInitial, lngInitial, 225);
                    //var mapOptions = {zoom: 12, center: initialLocation, mapTypeId: google.maps.MapTypeId.ROADMAP};
                    map = new google.maps.Map(
                            document.getElementById('map'),
                            {zoom: 15, center: initialLocation, mapTypeId: google.maps.MapTypeId.TERRAIN}
                    );
                    // Define the LatLng coordinates for the polygon.
                    var triangleCoords = [
                        initialLocation,
                        initialLocation1,
                        initialLocation2,
                        initialLocation3,
                        initialLocation4,
                        initialLocation5
                    ];

                    // Construct the polygon.
                    polygoneDepart = new google.maps.Polygon({
                        paths: triangleCoords,
                        strokeColor: '#FF0000',
                        strokeOpacity: 0.8,
                        strokeWeight: 1,
                        fillColor: '#FF0000',
                        editable: false,
                        draggable: false,
                        fillOpacity: 0.35
                    });

                    polygoneDepart.setMap(map);
                    function translateCoordinates(distance, Lat, Lng, angle) {
                        distanceNorth = Math.sin(angle) * distance;
                        distanceEast = Math.cos(angle) * distance;
                        earthRadius = 6371000;
                        newLat = Lat + (distanceNorth / earthRadius) * 180 / Math.PI;
                        newLon = Lng + (distanceEast / (earthRadius * Math.cos(newLat * 180 / Math.PI))) * 180 / Math.PI;
                        return {lat: newLat, lng: newLon};
                    }

</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDJXY5vQQ_aowKOUA--27f7fgKDs07li60&callback=initialize">
</script>
